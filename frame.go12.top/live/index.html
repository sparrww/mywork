<!DOCTYPE html>
<html lang="zh-CN">

	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>视频展示 - 云事通网络</title>

		<style type="text/css">
			html {
				font-family: "微软雅黑";
			}
			body {
				margin-bottom: 100px;
			}
			.videoBox {/*播放容器CSS*/
				width: 400px;
				height: 300px;
				max-width: 600px;
				max-height: 450px;
			}
			.videoLogs {/*日志CSS*/
				position: fixed;
				bottom: 0;
				z-index: 10;
				width: 100%;
				height: 100px;
			}
			.videoTips {/*视频连接提示CSS*/
				max-width: 600px;
				margin: 0 auto;
				font: normal 1em/1.5em "微软雅黑",serif;
			}
			.example {
				width:100%;
				height: auto;
				overflow: hidden;
			}
		</style>
		<script src="js/jquery.min.js" type="text/javascript" charset="utf-8"></script>
		<!--
		 生产/正式环境请引用jq.getVideo.min.js
		<script src="js/jq.getVideo.min.js?v=2.0" type="text/javascript" charset="utf-8"></script>
		
		-->
		<script src="js/jq.getVideo.js?v=2.0" type="text/javascript" charset="utf-8"></script>

	</head>

	<body>

		<div id="video1" class="videoBox" data-vid="4"></div>

		<dl>
			<dt><h2>url传参</h2></dt>
			<dd>
				<p>示例1：<a href="?ip=v1.insytone.cn&user=jkzxzb&password=123456&ratio=9/16">?ip=v1.insytone.cn&user=jkzxzb&password=123456&ratio=9/16</a></p>
				<p>示例2：<a href='?xml=xml/getvideo.xml&vid=5'>?xml=xml/getvideo.xml&vid=5</a></p>
				<p>示例3：<a href='?json=xml/getvideo.json&vid=6'>?json=xml/getvideo.json&vid=6</a></p>
				<p></p>
				<p>说明：参数部分参考文档下方的js传参的参数说明</p>
				<p>示例1直接通过浏览器传递监控直播视频的参数（不推荐）；</p>
				<p>示例2、3通过与服务器数据交互得到视频参数,xml、json可动态获取,vid为数据交换的参数。类似访问：http://url.com/xml/test.xml?vid=4,然后服务器返回监控直播的xml/json参数</p>
			</dd>
			<dt><h2>data属性传参</h2></dt>
			<dd>
				<textarea class="example" rows="6">
<div id="video1" class="videoBox" data-xml="test.xml" data-vid="4"></div>
<script type='text/javascript'>
	$(document).ready(function() {
		$('#video1').getVideo();//或$('.videoBox').getVideo();
	});
</script></textarea>
				<p>jq.getVideo.js通过id或class来定位播放容器,如需播放多个视频,可命名不同的id/class<br /></p>
				<p>通过播放容器的data-xxx属性传参给js，xxx值参考下方的js传参的参数说明</p>
			</dd>
			<dt><h2>js传参</h2></dt>
			<dd>
				<textarea class="example" rows="24">
$('#video1').getVideo({
	//动态获取
	xml: 'getvideo.xml',	//xml请求/返回地址，如用json请留空
	json: 'getvideo.json',	//json请求/返回地址，优先获取xml地址，仅xml地址无效时才使用
	vid: 0,			//为空时默认请求第一个视频
	//监控直播视频参数
	ip: 'v1.insytone.cn',	//默认服务器IP地址
	port: '2005',		//默认端口号
	user: '',		//默认用户名,如有定义则忽略xml,json参数
	password: '',		//默认密码
	dev: 0,			//设备号/实例名,空或0表示获取第1台设备
	channel: 0, 		//摄像头/通道ID，空或0表示获取第1个摄像头/通道
	res: 0, 		//分辨率:默认0=辅码流，1=主码流
	code: 0,		//关键参数!视频编码协议:0=监控,1=直播rtmp,2=直播HLS
	src:"",			//视频播放地址,如有定义则忽略user,xml,json等参数
	//播放器控制
	type: 0,		//播放方式：默认0按浏览器适应,1=flash播放,2=html5播放
	swfPath: 'js',		//swf播放器路径,只能由JS传参或内部定义,仅flash方式播放时生效
	ratio: 0,		//视频高/宽比例,小数0.75或9/16,空或0时不指定比例,由css指定视频宽高
	auto: 1,		//是否自动播放
	delay: 1000,		//延时播放时间,待生成切片文件/或广告后再调用
	logs: 0,		//日志class类，不输出日志请留空
	tips: 0			//提示class类，不输出提示请留空
});</textarea>
				<p>参数获取优先级：url传参 > data属性 > js传参 > js缺省值</p>
				<p>参数采纳优先级：src > user > xml > json > vid</p>
				<p>所有参数均可省略，省略时将按上述优先级顺序获取，直至缺省值</p>
				<h3>特别说明：生产/正式环境请引用jq.getVideo.min.js,将忽略url的logs参数</h3>
			</dd>
			<dt><h2>xml文件示例</h2></dt>
			<dd>
				<p>xml文件通过传参vid获取视频信息(例)：http://url.com/xml/test.xml?vid=videoName1</p>
				<textarea class="example" rows="17">
<videos>
	<!--参数部分请参考js传参，部分参数可省略-->
	<video>
		<vid>4</vid>
		<ip>v1.insytone.cn</ip>
		<port>2005</port>
		<user>jkzxzb</user>
		<password>123456</password>
	</video>
	<video>
		<vid>5</vid>
		<ip>v1.insytone.cn</ip>
		<port>2005</port>
		<user>jkzxzb2</user>
		<password></password>
	</video>
</videos></textarea>
			</dd>
			<dt><h2>json示例</h2></dt>
			<dd>
				<p><del>1、通过json获取视频信息(已取消此实例)：<a href="?json=xml/getvideo.php&vid=4">?json=xml/getvideo.php&vid=4</a></del></p>
				<textarea class="example" rows="2">{"ip":"v1.insytone.cn","port":"2005","user":"jkzxzb3","password":"","dev":""}</textarea>
				<p>2、PHP动态跨域获取json示例：<a href="?json=http://book.go12.top/live/xml/getvideo.php&vid=4">?json=http://insytone.com/xml/getvideo.php&vid=4</a></p>
				<p>jsonp服务器端实例：getvideo.php</p>
				<textarea class="example" rows="40"><?php
	$callback = $_REQUEST['callback'];
	$vid = $_REQUEST['vid'];
	//自定义视频参数数组项，可从服务器数据库获取
	$data_array = array(
		array(
	    'vid' => '4',				//监控直播ID号，唯一
		'ip' => 'v1.insytone.cn',	//服务器IP或url
	    'user' => 'jkzxzb',			//用户名
		'password' => '123456',		//密码
	    ),
		array(
	    'vid' => '5',				//监控直播ID号，唯一
		'ip' => 'v1.insytone.cn',	//服务器IP或url
	    'user' => 'jkzxzb2',		//用户名
		'password' => '',			//密码
	    ),
		array(
	    'vid' => '6',				//监控直播ID号，唯一
		'ip' => 'v1.insytone.cn',	//服务器IP或url
	    'user' => 'jkzxzb3',		//用户名
	    )
	);
	//查询匹配的数组
	foreach ($data_array as $data) {
		if ($vid==$data['vid']){
			$output=$data;
			break;
		}
	}
	//输出JSON
	if ($callback) {
	    header('Content-Type: text/javascript');
	    echo $callback . '(' . json_encode($output) . ');';
	} else {
	    header('Content-Type: application/x-json');
	    echo json_encode($output);
		//{"ip":"v1.insytone.cn","port":"2005","user":"jkzxzb3","password":"","dev":""}
	}
?>
				</textarea>
				
			</dd>
		</dl>

		<script type='text/javascript'>
			$(document).ready(function() {
				$('#video1').getVideo();//或$('.videoBox').getVideo();
			});
		</script>

	</body>
</html>